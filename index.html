<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ุชุญููู ุงูุชุทุจูู</title>
  <link rel="manifest" href="manifest.json">
</head>
<body style="text-align:center;font-family:Arial">

<h2>๐ฒ ุฅุดุนุงุฑ ุชุญููู ุงูุชุทุจูู</h2>
<button onclick="askPermission()">ุชูุนูู ุงูุฅุดุนุงุฑุงุช</button>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js')
  .then(() => console.log("SW registered"))
  .catch(err => console.error("SW registration failed:", err));
}

function askPermission() {
  Notification.requestPermission().then(result => {
    alert("ุญุงูุฉ ุงูุฅุฐู: " + result);

    if (result === "granted") {
      // ุจุฏุก ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุชููุงุฆููุง ูู ุฏูููุชูู
      startAutoNotifications();
    }
  });
}

function startAutoNotifications() {
  navigator.serviceWorker.ready.then(reg => {
    // ุฅุฑุณุงู ุฃูู ุฅุดุนุงุฑ ููุฑูุง
    sendNotification(reg);

    // ุฅุฑุณุงู ุฅุดุนุงุฑ ูู ุฏูููุชูู (120000 ูููู ุซุงููุฉ)
    setInterval(() => {
      sendNotification(reg);
    }, 120000);
  });
}

function sendNotification(reg) {
  reg.showNotification("๐ฒ ุญููู ุชุทุจูููุง ุงูุขู!", {
    body: "ุงุถุบุท ููุง ูุชุญููู ุงูุชุทุจูู",
    icon: "icon.png",
    data: { url: "https://play.google.com/store/apps/details?id=com.example.app" }
  });
}
</script>

</body>
</html>
